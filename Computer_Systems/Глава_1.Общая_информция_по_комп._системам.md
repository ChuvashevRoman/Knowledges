# Глава 1. Экскурс в компьютерные системы
---

## Информация — это биты + контекст
Большинство современных систем представляют текстовые символы в стандарте ASCII.
Вся информация системы, включая файлы на дисках, программы и данные пользователей, хранящиеся в памяти, а также данные, передаваемые по сети, представляются в виде некоторых порций. Единственное, что отличает различные виды данных друг от друга — контекст, в котором мы их рассматриваем.

## Программы, которые переводятся другими программами в различные формы
В операционной системе Unix преобразование исходного файла в объектный файл выполняется драйвером компилятора:
unix> gcc -о hello hello.с

Процес компиляции на примере программы hello.c
``` c
#include <stdio.h>

int main()
{
	printf("hello, world\n");
}
```
Компиляция происходит в 4 этапа:
1. Стадия препроцессора (предварительной обработки). Препроцессор (cpp) изменяет исходную программу в соответствии с директивами #include <stdio.h>.
1. Стадия компиляции. Компилятор (ccl) транслирует текстовый файл в текстовый файл hello.s, который содержит программу на языке ассемблера.
1. Стадия ассемблирования. Ассемблер (as) транслирует файл hello.s в инструкции машинного языка, упаковывает их в форму, известную как перемещаемая  объектная программа, и запоминает результат в объектном файле hello.о.
1. Стадия редактирования связей. Производит слияние программы с стандартными библиотеками С, в данном случае с функцией printf.

![Процесс компиляции программы](./images/im1.png)

## Аппаратное устройство системы

![Организация аппаратных свойств типичной вычислительной системы](./images/im2.png)

- **Шины**. Совокупность электрических проводников, так называемых шин, по которым байты информации циркулируют между компонентами системы. Обычно шины конструируются таким образом, чтобы можно было передавать порции, содержащие фиксированное число байтов, получившие название слово. 
- **Устройства ввода вывода**. Устройства ввода-вывода представляют собой средства связи с внешним миром.
- **Оперативная память**. Временное запоминающее устройство, в котором временно хранятся как программа, так и данные, которыми она манипулирует во время выполнения. Физически основная память состоит из совокупности чипов динамических оперативных запоминающих устройств. В логическом плане основная память организована в виде линейной последовательности байтов, каждый из которых имеет свой собственный уникальный адрес (индекс элемента массива); отсчет адресов начинается с нуля.
- **Процессор**. инструкции, хранящиеся в основной памяти. Его ядро составляет устройство памяти размером в одно слово (или регистр), получившее название счетчик команд (PC). Он считывает из памяти инструкцию, указанную счетчиком команд, интерпретирует биты инструкции, выполняет простые операции, предписанные инструкцией, а затем обновляет значение счетчика, чтобы тот указывал адрес следующей инструкции.
Регистровый файл — небольшое запоминающее устройство, которое состоит из совокупности регистров размеров в одно слово, каждый из которых имеет свое уникальное имя. Устройство вычисляет новые значения данных и адресов. Примеры операций, которые процессор выполняет по требованию инструкции:
	- Загрузка. Скопировать байт или слово из основной памяти в регистр, затирая при этом предыдущее содержимое этого регистра.
	- Запоминание. Скопировать байт или слово из регистра в некоторую ячейку основной памяти, затирая при этом предыдущее содержимое этой ячейки.
	- Обновление данных. Скопировать содержимое двух регистров ALU, которое складывает эти два слова и запоминает результат в одном из регистров, затирая при этом предыдущее содержимое этого регистра.
	- Считывание ввода-вывода. Скопировать байт или слово из устройства ввода-вывода в регистр.
	- Запись ввода-вывода. Скопировать байт или слово из регистра в устройство ввода-вывода.
	- Переход. Извлечь слово из самой инструкции и скопировать это слово в счетчик команд, затирая предыдущее содержимое.
